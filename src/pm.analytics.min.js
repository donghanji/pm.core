/*
   pm.build.js ,version 1.2.1 ,updated on 2016-03-07
   module for Plugins Modules library.

   https://github.com/donghanji/pm
 */

!function(){var a=module.globals("$");module.declare("pm.analytics",[a,"pm"],function(b,c){function d(a){a=a||{},a.el=a.el||"body",a.name=a.name||"",this.statistics=a.statistics||window._hmt,this.mappings=a.mappings||{},this.options=a,this.$el=e(a.el),this.el=this.$el[0];var b=this;this.$el.on("click","[data-analytics]",function(a){var c=this.getAttribute("data-analytics");if(null!==c&&"ignore"!==c){b.data=c,b.target=this,b.$target=e(this);var d=b.info();b.statistics&&b.statistics.push(d),b.options.analyze&&b.options.analyze.call(b,a)}})}var e=b(a),f=b("pm"),g=f.utils;return d.prototype={get:function(){var a=this.data,b={};a&&(a.indexOf(";")>-1||a.indexOf(":")>-1?(a=a.split(";"),g.each(a,function(a,c){if(a.indexOf(":")>-1){var d=a.split(":");b[d[0]]=d[1]}})):b.name=a);var c=b.name||"",d=this.options.name?[this.options.name,c].join(" "):c,e=this.mappings[d]||this.mappings[c]||{};return g.extend(b,e)},info:function(){var a=this.get(),b=this.options.name||"page",c=a.name||"",d=a.type||"click",e=a.alias||"button",f=this.options.device,g=[b];f&&g.push(f),c&&g.push(c);var h=g.join("-");return["_trackEvent",h,d,e]}},d.create=function(a){return new d(a)},f.ns("analytics"),f.analytics=d,d})}();